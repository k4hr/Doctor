// prisma/schema.prisma
generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

enum DoctorStatus {
  PENDING
  NEED_FIX
  APPROVED
  REJECTED
}

model Doctor {
  id        String       @id @default(cuid())
  createdAt DateTime     @default(now())
  updatedAt DateTime     @updatedAt
  submittedAt DateTime?  // когда реально отправлено на модерацию (после загрузки доков)
  status    DoctorStatus @default(PENDING)

  // Telegram
  telegramId        String  @unique
  telegramUsername  String?
  telegramFirstName String?
  telegramLastName  String?

  // Личные данные
  lastName   String
  firstName  String
  middleName String?
  gender     String
  birthDay   Int?
  birthMonth Int?
  birthYear  Int?
  city       String?

  // Профессиональные данные
  speciality1     String
  speciality2     String?
  speciality3     String?
  education       String
  degree          String?
  workplace       String?
  position        String?
  experienceYears Int
  awards          String?

  // Контакты
  email String

  // Дополнительно
  about             String
  specialityDetails String
  experienceDetails String
  courses           String?
  achievements      String?
  publications      String?

  // Документы (после шага docs)
  profilePhotoUrl String?
  diplomaPhotoUrl String?

  @@index([status])
  @@index([speciality1])
  @@index([city])
}
